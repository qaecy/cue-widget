import{a as B}from"./chunk-3OAOPLDM.js";import{A as b,B as C,I as T,J as g,t as P}from"./chunk-PJ7HGDON.js";import{Bb as D,Ca as _,Cb as y,Dc as S,Eb as r,Fa as w,Gc as R,Jb as a,Lc as x,Nb as m,Ob as f,Pb as p,Rb as I,Zb as h,_b as s,ab as o,gc as O,hc as V,i as M,kb as E,oa as c,pa as d,sb as v,xb as u}from"./chunk-IVPYXZHS.js";var q=["container"],z=()=>[C,g];function A(t,l){if(t&1){let e=I();m(0,"cue-passive-mode",3),h("click",function(){c(e);let n=s(2);return d(n.loadDeferred=!0)}),f()}}function k(t,l){if(t&1&&p(0,"cue-icon-menu",4)(1,"cue-bim-tiles-viewer",5),t&2){let e=s(2);r("menuItems",e.menuItems),o(),r("id",e.id)("data",e.geometryDefinitions())}}function H(t,l){if(t&1&&(u(0,A,1,0,"cue-passive-mode",2)(1,k,2,3),D(2,1,z)),t&2){let e=s();a(e.loadDeferred?-1:0),o(2),y(e.loadDeferred)}}function L(t,l){if(t&1&&p(0,"cue-icon-menu",4)(1,"cue-bim-tiles-viewer",5),t&2){let e=s();r("menuItems",e.menuItems),o(),r("id",e.id)("data",e.geometryDefinitions())}}var F="demo-project",j=(()=>{class t{data=_();startPassive=_(!0,{transform:S});loadDeferred=!1;id=x();geometryDefinitions=R(()=>{let e=this.data()?.geometryDefinitions;if(e===void 0)return;let i=new b(F);return i.urlAuthenticator=n=>M(this,null,function*(){return`https://qaecy.github.io/demo-widget/${F}/tiles/${n}`}),i.geometryDefinitions=e,i});menuItems=[new T("add","View in fullscreen",()=>this._goFullScreen())];_parentWidth=w(void 0);_initialHeight;_container=E("container");ngOnInit(){document.addEventListener("fullscreenchange",()=>{if(document.fullscreenElement)console.log("Entered fullscreen");else if(console.log("Exited fullscreen"),this._initialHeight!==void 0){let e=this._container()?.nativeElement;e&&(e.style.height=this._initialHeight+"px")}})}ngOnDestroy(){console.log("DESTROY")}onResized(e){this._parentWidth.set(e.newRect.width)}_goFullScreen(){let e=document.getElementById(this.id);if(this._initialHeight=e?.offsetHeight,!e)throw new Error("Element could not be reached");e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=v({type:t,selectors:[["app-bim-viewer"]],viewQuery:function(i,n){i&1&&O(n._container,q,5),i&2&&V()},inputs:{data:[1,"data"],startPassive:[1,"startPassive"]},decls:4,vars:2,consts:()=>{let e;return e=$localize`Load model`,[["container",""],["cueResized","",1,"container",3,"resized"],["icon","rotate-3d","label",e],["icon","rotate-3d","label",e,3,"click"],["openDirection","left",1,"bim-viewer-menu",3,"menuItems"],[2,"height","100%","width","100%",3,"id","data"]]},template:function(i,n){if(i&1){let U=I();m(0,"div",1,0),h("resized",function(N){return c(U),d(n.onResized(N))}),u(2,H,4,2)(3,L,2,3),f()}i&2&&(o(2),a(n.data()&&n.startPassive()?2:-1),o(),a(n.data()&&!n.startPassive()?3:-1))},dependencies:[C,P,B,g],styles:[".container[_ngcontent-%COMP%]{position:relative}.bim-viewer-menu[_ngcontent-%COMP%]{position:absolute;right:30px;top:10px}"]})}return t})();export{j as InChatBIMViewer};
